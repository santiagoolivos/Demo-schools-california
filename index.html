<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Schools California</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'california-blue': '#1e40af',
                        'california-gold': '#f59e0b',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="min-h-screen flex flex-col items-center justify-center px-4">
        <div class="bg-white rounded-2xl shadow-2xl p-8 md:p-12 max-w-2xl w-full text-center">
            <!-- Título -->
            <h1 class="text-4xl md:text-6xl font-bold bg-gradient-to-r from-california-blue to-indigo-600 bg-clip-text text-transparent mb-12">
                Demo Schools California
            </h1>
            
            <!-- Botón Submit -->
            <button 
                id="submitBtn"
                class="bg-gradient-to-r from-california-blue to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-4 px-8 md:px-12 rounded-xl text-lg md:text-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-50"
                onclick="handleSubmit()"
            >
                Submit
            </button>
            
            <!-- Decoración adicional -->
            <div class="mt-8 flex justify-center space-x-2">
                <div class="w-2 h-2 bg-california-blue rounded-full animate-pulse"></div>
                <div class="w-2 h-2 bg-indigo-500 rounded-full animate-pulse" style="animation-delay: 0.2s;"></div>
                <div class="w-2 h-2 bg-california-gold rounded-full animate-pulse" style="animation-delay: 0.4s;"></div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="mt-8 text-gray-500 text-sm">
            <p>Página demo para escuelas de California</p>
        </div>
    </div>

    <script>
        async function handleSubmit() {
            console.log('Submit button clicked');
            
            const button = document.getElementById('submitBtn');
            
            // Cambiar texto del botón a "Enviando..."
            const originalText = button.textContent;
            button.textContent = 'Enviando...';
            button.disabled = true;
            button.classList.add('opacity-75', 'cursor-not-allowed');
            
            // Datos a enviar
            const postData = {
                "school_county": "Santa Clara",
                "school_district": "Santa Clara Unified",
                "school_name": "Washington Open Elementary",
                "first_name": "John",
                "last_name": "Doe",
                "relation_to_child": "Father",
                "email": "john@example.com",
                "phone": "+1-212-456-7890",
                "street_address": "1234 Main Street",
                "city": "Redondo Beach",
                "state": "CA",
                "zip": "90278",
                "child_full_name": "James Doe",
                "child_grade": "3rd grade"
            };
            
            try {
                const response = await fetch('https://santiagoolivos.app.n8n.cloud/webhook/1536ff38-d614-4376-a07b-7c3b54dc1d78', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(postData)
                });
                
                console.log('response', response);
                showMessage('¡Datos enviados correctamente!', 'success');
                
            } catch (error) {
                console.error('Error al enviar datos:', error);
                
                // Verificar si es un error de CORS específicamente
                if (error.message.includes('CORS') || error.message.includes('fetch')) {
                    console.log('Error de CORS detectado, pero los datos probablemente se enviaron');
                    showMessage('Datos enviados (CORS bloqueado por el navegador)', 'success');
                } else {
                    showMessage('Error al enviar los datos. Intenta de nuevo.', 'error');
                }
            } finally {
                // Restaurar botón
                setTimeout(() => {
                    button.textContent = originalText;
                    button.disabled = false;
                    button.classList.remove('opacity-75', 'cursor-not-allowed');
                }, 1000);
            }
        }
        
        function showMessage(message, type) {
            // Crear elemento de mensaje
            const messageDiv = document.createElement('div');
            messageDiv.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 transition-all duration-300 ${
                type === 'success' 
                    ? 'bg-green-500 text-white' 
                    : 'bg-red-500 text-white'
            }`;
            messageDiv.textContent = message;
            
            // Añadir al DOM
            document.body.appendChild(messageDiv);
            
            // Remover después de 3 segundos
            setTimeout(() => {
                messageDiv.classList.add('opacity-0', 'transform', 'translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(messageDiv);
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
